<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BROTHERS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body, header, nav, a {
        font-family: 'Orbitron', sans-serif;
      }

      body {
        background: linear-gradient(135deg, #000000, #FFD700);
        color: #f8f9fa;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      header {
        background: rgba(0, 0, 0, 0.8);
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.6);
      }

      header a {
        color: #FFD700;
        transition: color 0.3s;
      }

      header a:hover {
        color: #ffffff;
      }

      .dropdown-menu {
        background-color: #1a1a1a;
        border: none;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      }

      .dropdown-item {
        color: #FFD700;
        font-weight: bold;
      }

      .dropdown-item:hover {
        background-color: rgba(255, 215, 0, 0.2);
        color: #FFD700;
      }

      .dropdown-toggle::after {
        display: none;
      }

      .profile-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #FFD700;
        display: inline-block;
        text-align: center;
        line-height: 40px;
        color: #000;
        font-weight: bold;
        font-size: 1rem;
      }
    </style>
  </head>
  <body>
    <header class="py-3">
      <div class="container d-flex justify-content-between align-items-center">
        <a href="#" class="text-decoration-none fw-bold">
          <img src="./photos/logo0.png" alt="Logo" width="150">
        </a>
        <nav class="d-flex justify-content-around w-50">
          <a id="home-link" class="text-decoration-none" href="main.html">Home</a>
          <a id="users-link" class="text-decoration-none" href="users_chek.html">Users</a>
          <a href="devices.html" class="text-decoration-none">Devices</a>
          <a href="prices.html" class="text-decoration-none">Price</a>
          <a href="vip.html" class="text-decoration-none">VIP rooms</a>
          <a href="#" class="text-decoration-none">Contact</a>
        </nav>
        <div class="dropdown">
          <a href="#" class="dropdown-toggle" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
            <div class="profile-icon">P</div>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuLink">
            <li><a class="dropdown-item" href="profile.html">Profile</a></li>
            <li><a class="dropdown-item" href="main.html">Logout</a></li>
          </ul>
        </div>
      </div>
    </header>

    <div class="container">
      <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
        <p class="col-md-4 mb-0 text-body-secondary">&copy; 2024 Company, Inc</p>

        <a href="/" class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
          <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
        </a>

        <ul class="nav col-md-4 justify-content-end">
          <li class="nav-item"><a href="https://www.instagram.com/brothers_astana/" class="nav-link px-2 text-body-secondary">Instagram</a></li>
          <li class="nav-item"><a href="https://www.tiktok.com/@brothers_astana01?_t=8sDlm00mjYM&_r=1" class="nav-link px-2 text-body-secondary">TikTok</a></li>
          <li class="nav-item"><a href="https://2gis.kz/astana/search/Brothers%2C%20компьютерный%20клуб/firm/70000001037713195/71.442558%2C51.094322" class="nav-link px-2 text-body-secondary">2Gis</a></li>
        </ul>
      </footer>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        // Функция для проверки статуса авторизации
        function checkLoginStatus() {
          const token = localStorage.getItem("auth_token"); // Получаем токен из localStorage
    
          if (token) {
            const decoded = JSON.parse(atob(token.split('.')[1])); // Декодируем токен
    
            // Если токен валиден, обновляем UI в зависимости от роли
            const homeLink = document.getElementById("home-link");
            if (homeLink) {
              homeLink.href = decoded.role === "Admin" ? "admin.html" : "user.html"; 
            }
            
            const usersLink = document.getElementById("users-link");
            if (usersLink) {
              usersLink.style.display = "inline"; // Ссылка на "Users" видна для всех пользователей
            }
    
            const profileIcon = document.getElementById("profile-icon");
            if (profileIcon) {
              profileIcon.innerText = decoded.name ? decoded.name.charAt(0) : "U"; // Отображаем первую букву имени пользователя
            }
    
            checkTokenExpiry(decoded); // Проверяем срок действия токена
          } else {
            // Если токен отсутствует, редиректим на страницу логина
            window.location.href = "login.html";
          }
        }
    
        // Функция для проверки срока действия токена
        function checkTokenExpiry(decoded) {
          const currentTime = Math.floor(Date.now() / 1000); // Получаем текущее время в секундах
    
          if (decoded.exp < currentTime) {
            alert("Ваша сессия истекла. Пожалуйста, войдите снова.");
            localStorage.removeItem("auth_token"); // Удаляем токен, если он истек
            window.location.href = "login.html"; // Перенаправляем на страницу логина
          }
        }
    
        // Функция для проверки прав доступа к странице "Users"
        function checkUserAccess() {
          const token = localStorage.getItem("auth_token");
    
          if (token) {
            const decoded = JSON.parse(atob(token.split('.')[1]));
    
            // Если роль не "Admin", и страница "users_chek.html", выводим предупреждение
            if (decoded.role !== "Admin" && window.location.pathname.includes("users_chek.html")) {
              alert("У вас нет доступа к этой странице.");
            }
          }
        }
    
        // Функция для выхода из аккаунта
        function logout() {
          localStorage.removeItem("auth_token"); // Удаляем токен
          window.location.href = "login.html"; // Перенаправляем на страницу логина
        }
    
        // Функция, которая запускается при загрузке страницы
        checkLoginStatus();
        checkUserAccess();
    
        // Добавляем обработчик для кнопки выхода, если она существует
        const logoutBtn = document.getElementById("logout-btn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", logout);
        }
      });
    </script>
    
    
    
    
    
    
    
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>